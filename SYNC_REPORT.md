# ‚úÖ –û–¢–ß–ï–¢: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –∏–∑ WooCommerce

**–î–∞—Ç–∞:** 18.11.2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ /stats –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —Ç–æ–ª—å–∫–æ 23 –ø—Ä–æ–º–æ–∫–æ–¥–∞, —Ö–æ—Ç—è –≤ WooCommerce –∏—Ö –±—ã–ª–æ 82  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–º–∞–Ω–¥–∞ `/stats` –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
- **–í –±–æ—Ç–µ:** 23 –ø—Ä–æ–º–æ–∫–æ–¥–∞
- **–í WooCommerce:** 82 –∫—É–ø–æ–Ω–∞
- **–†–∞–∑–Ω–∏—Ü–∞:** 59 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å!

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å WooCommerce

**–°–∫—Ä–∏–ø—Ç:** `sync_promocodes_from_woocommerce.py`

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü–æ–ª—É—á–µ–Ω—ã –í–°–ï –∫—É–ø–æ–Ω—ã –∏–∑ WooCommerce (82 —à—Ç—É–∫–∏)
2. –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ –ë–î
3. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î
4. **–í–ê–ñ–ù–û:** –í—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ "—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã"

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –î–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
```
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞:    23 –ø—Ä–æ–º–æ–∫–æ–¥–∞
WooCommerce:         82 –∫—É–ø–æ–Ω–∞
–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:         59 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
```

### –ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
```
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞:    83 –ø—Ä–æ–º–æ–∫–æ–¥–∞ ‚úÖ
WooCommerce:         82 –∫—É–ø–æ–Ω–∞
–î–æ–±–∞–≤–ª–µ–Ω–æ:           60 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
–ü—Ä–æ–ø—É—â–µ–Ω–æ:           22 (—É–∂–µ –±—ã–ª–∏ –≤ –ë–î)
–û—à–∏–±–æ–∫:              0
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í –ë–î 83 –ø—Ä–æ–º–æ–∫–æ–¥–∞ (–∞ –Ω–µ 82) –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–¥–∏–Ω –∏–∑ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –∏–ª–∏ —Å–æ–∑–¥–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ.

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### ‚úÖ –í–°–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –ø–æ–º–µ—á–µ–Ω—ã:

```sql
notification_5_days_sent = 1
notification_5_days_date = NOW()
notification_3_days_sent = 1
notification_3_days_date = NOW()
notification_1_day_sent = 1
notification_1_day_date = NOW()
feedback_requested = 1
feedback_request_date = NOW()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ù–ï –ø–æ–ª—É—á–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–æ–º–æ–∫–æ–¥–∞–º
- ‚úÖ –ù–æ–≤—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã (–ø–æ—Å–ª–µ 17.11.2025) –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

---

## üìù –ü—Ä–∏–º–µ—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤

| –ö–æ–¥ | User ID | Username | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | WooCommerce ID |
|-----|---------|----------|---------------|----------------|
| PLUMMY0BE2E3 | 1115598029 | @christiano99 | 15.11.2025 | –î–∞ |
| PLUMMY5940F7 | 6984336208 | @fackshmouk... | 05.11.2025 | –î–∞ |
| PLUMMYA2260D | 165568710 | @vctrvnn | –û–∫—Ç—è–±—Ä—å | –î–∞ |
| ... | ... | ... | ... | ... |

*–í—Å–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ 60 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤*

---

## üéØ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 1. –ö–æ–º–∞–Ω–¥–∞ /stats
```
–¢–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
‚Ä¢ –í—Å–µ–≥–æ –≤—ã–¥–∞–Ω–æ: 83 –ø—Ä–æ–º–æ–∫–æ–¥–∞ ‚úÖ
‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: X –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
‚Ä¢ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: Y%
```

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```
‚úì –í—Å–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –∑–∞—â–∏—â–µ–Ω—ã (4 —É—Ä–æ–≤–Ω—è)
‚úì –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –∑–∞—â–∏—â–µ–Ω—ã
‚úì –ù–æ–≤—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
```

### 3. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å WooCommerce
```
‚úì –ë–î —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å WooCommerce
‚úì –í—Å–µ –∫—É–ø–æ–Ω—ã —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
‚úì –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

1. **–ü–æ–ª—É—á–∞–µ—Ç –∫—É–ø–æ–Ω—ã –∏–∑ WooCommerce:**
   ```python
   all_coupons = await woo_manager.get_all_bot_coupons()
   # –ü–æ–ª—É—á–µ–Ω–æ: 82 –∫—É–ø–æ–Ω–∞ (–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 'plummy')
   ```

2. **–ò–∑–≤–ª–µ–∫–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:**
   ```python
   telegram_user_id = meta['_telegram_user_id']
   telegram_username = meta['_telegram_username']
   woocommerce_id = coupon['id']
   discount_percent = coupon['amount']
   ```

3. **–°–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
   ```python
   await db.user.get_or_create_user(
       user_id=telegram_user_id,
       username=telegram_username
   )
   ```

4. **–î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–æ–∫–æ–¥—ã —Å –∑–∞—â–∏—Ç–æ–π:**
   ```python
   INSERT INTO promocodes (
       ...,
       notification_5_days_sent = 1,  # ‚ö†Ô∏è –ó–ê–©–ò–¢–ê
       notification_3_days_sent = 1,  # ‚ö†Ô∏è –ó–ê–©–ò–¢–ê
       notification_1_day_sent = 1,   # ‚ö†Ô∏è –ó–ê–©–ò–¢–ê
       feedback_requested = 1         # ‚ö†Ô∏è –ó–ê–©–ò–¢–ê
   )
   ```

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ö–æ–º–∞–Ω–¥–∞ `/stats` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –í—Å–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –∏–∑ WooCommerce —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–∫—Ç–∏–≤–Ω–∞

### ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏–∏:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ù–ï –ø–æ–ª—É—á–∞—Ç —Å–ø–∞–º-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ù–æ–≤—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞

### ‚úÖ –ú–æ–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å:
- –§–∞–π–ª—ã –ë–î –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- –ó–∞—â–∏—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
modified:   bot_database.db
    ‚úì –î–æ–±–∞–≤–ª–µ–Ω–æ 60 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
    ‚úì –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (75 –∑–∞–ø–∏—Å–µ–π)
    ‚úì –í—Å–µ –ø–æ–º–µ—á–µ–Ω—ã "—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã"
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
–ï—Å–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –∫—É–ø–æ–Ω—ã –≤ WooCommerce (–Ω–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞), —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:

```bash
python3 sync_promocodes_from_woocommerce.py
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ:** –°–∫—Ä–∏–ø—Ç:
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã
- –ü–æ–º–µ—á–∞–µ—Ç –Ω–æ–≤—ã–µ –∫–∞–∫ "—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã"
- –ù–µ —Å–æ–∑–¥–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤ –∫–æ–¥ –±–æ—Ç–∞:
```python
# –†–∞–∑ –≤ —Å—É—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å WooCommerce
asyncio.create_task(periodic_sync())
```

---

## ‚úÖ –ò—Ç–æ–≥

**–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê:**
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (83 –ø—Ä–æ–º–æ–∫–æ–¥–∞)
- ‚úÖ –ë–∞–∑–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å WooCommerce
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã

**–ú–æ–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å –±–µ–∑ –æ–ø–∞—Å–µ–Ω–∏–π!** üöÄ

---

*–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: 18.11.2025*  
*–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~2 —Å–µ–∫—É–Ω–¥—ã*  
*–ü—Ä–æ–º–æ–∫–æ–¥–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–æ: 60*  
*–û—à–∏–±–æ–∫: 0*

