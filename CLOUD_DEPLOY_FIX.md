# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–µ–ø–ª–æ—è

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Container is not running, status: restarting

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ –∑–∞—Ç–µ–º –ø–∞–¥–∞–µ—Ç –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Dockerfile**
–¢–µ–ø–µ—Ä—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `BOT_TOKEN` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º.

### 2. **–£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `-u` –¥–ª—è Python (unbuffered output)
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å traceback

### 3. **Try-catch –¥–ª—è health-check —Å–µ—Ä–≤–µ—Ä–∞**
–ï—Å–ª–∏ health-check –ø–∞–¥–∞–µ—Ç, –±–æ—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

---

## üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ:
```env
BOT_TOKEN=7397393634:AAEIYd8UmZnFZuPk-BT_iWAfPyeJsvOrHks
ADMIN_ID=5085912569
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ (–¥–ª—è WooCommerce):
```env
WOOCOMMERCE_URL=https://plummy.ru
WOOCOMMERCE_CONSUMER_KEY=ck_7f82e25fcc2f2ec34ba9e836987c18a9a83d18a8
WOOCOMMERCE_CONSUMER_SECRET=cs_ad749fffe9cbe120248be20988e5107ec64d6406
WOOCOMMERCE_ENABLED=true
SHOP_URL=https://plummy.ru
PROMO_DISCOUNT_PERCENT=13
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
```env
PORT=8080
DATABASE_URL=sqlite:///bot_database.db
SHOP_NAME=PlummyPromo
BROADCAST_ENABLED=true
```

---

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ –¥–µ–ø–ª–æ—è –∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- ‚úÖ `BOT_TOKEN` - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!**
- ‚úÖ `ADMIN_ID` - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!**
- ‚úÖ –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –®–∞–≥ 2: –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
git add .
git commit -m "Fix: Add env validation and improve error handling"
git push
```

### –®–∞–≥ 3: –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

–û–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—Å–ª–µ push.

### –®–∞–≥ 4: –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏

–í –ø–∞–Ω–µ–ª–∏ –æ–±–ª–∞—á–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏. –¢–µ–ø–µ—Ä—å –≤—ã —É–≤–∏–¥–∏—Ç–µ:

**–ï—Å–ª–∏ –Ω–µ—Ç BOT_TOKEN:**
```
‚ùå –û–®–ò–ë–ö–ê: BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è BOT_TOKEN
```

**–ï—Å–ª–∏ –≤—Å—ë –æ–∫:**
```
üéâ –ó–∞–ø—É—Å–∫ PlummyPromo Telegram Bot
==================================
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞...
‚úÖ Health-check —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8080
üöÄ –ó–∞–ø—É—Å–∫ PlummyPromo Bot...
üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
üìä –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∫–∞–∫ @your_bot_name
```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–∞–¥–µ–Ω–∏—è:

### 1. **BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π**
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `BOT_TOKEN` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –æ–±–ª–∞–∫–∞

### 2. **ADMIN_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**
**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `ADMIN_ID` (–≤–∞—à Telegram ID)

### 3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è**
**–†–µ—à–µ–Ω–∏–µ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `bot_database.db` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `/app/`

### 4. **–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π**
**–†–µ—à–µ–Ω–∏–µ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `requirements.txt`

### 5. **WooCommerce API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
**–†–µ—à–µ–Ω–∏–µ:** 
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `WOOCOMMERCE_ENABLED=false` —á—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å
- –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ WooCommerce

---

## üìä –ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:

### Railway:
- Deployments ‚Üí View Logs

### Render:
- Logs ‚Üí Real-time

### DigitalOcean:
- Runtime Logs

### Fly.io:
```bash
fly logs
```

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

### –ï—Å–ª–∏ –±–æ—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–∞–¥–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
   ```env
   BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
   ADMIN_ID=–≤–∞—à_id
   WOOCOMMERCE_ENABLED=false
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ:**
   ```bash
   git ls-files
   ```

3. **–õ–æ–∫–∞–ª—å–Ω–æ —Å–æ–±–µ—Ä–∏—Ç–µ Docker:**
   ```bash
   docker build -t test-bot .
   docker run --env-file .env test-bot
   ```

---

## ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç:

- [ ] `BOT_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] `ADMIN_ID` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –í—Å–µ —Ñ–∞–π–ª—ã –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ Git
- [ ] `bot_database.db` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–Ω–µ –≤ .gitignore)
- [ ] `requirements.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç `pytz==2025.2`
- [ ] Dockerfile —Å–æ–¥–µ—Ä–∂–∏—Ç `EXPOSE 8080`
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –≤ GitHub

---

## üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω:
1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
2. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 8080
3. ‚úÖ –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ health-check
4. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å Telegram –±–æ—Ç–∞
5. ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å 24/7

**–°—Ç–∞—Ç—É—Å –±—É–¥–µ—Ç: Running** ‚úÖ

---

*–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ –∏–∑ –æ–±–ª–∞—á–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.*

